

# 红黑树

## 定义



红黑树的英文是“Red-Black Tree”，简称 R-B Tree。



红黑树是一个平衡二叉查找树，平衡是指二叉树在频繁的插入和删除操作下，能基本保持任意节点的左右子树是基本对称的，不会出现性能严重退化。



红黑树不是严格的平衡，而是近似平衡。严格的平衡二叉查找树，比如`EVL树`，定义了任意节点的左右子树高度差不能超过1，时间复杂度为$O(log^n)$，而红黑树为$O(2log^n)$。



除了红黑树，平衡二叉查找树还有：`Splay Tree（伸展树）、Treap（树堆）`等



红黑树的规则：

1. 根节点是黑色的
2. 每个节点不是黑色，就是红色
3. 每个叶子结点都是值为`Nil`的黑色节点，不存数据（为了实现方便而设定的）
4. 红色节点一定是被两个黑色节点分隔开来的，即任意相邻的两个结点不能都是红色。（换句话说，如果一个节点是红色的，那么它的左右子节点一定是黑色的）
5. 任意节点到可达的叶子节点的所有路径，包含的黑色节点个数相同。



## 演变

红黑树是由`2-3树`演变来的：[清晰理解红黑树的演变---红黑的含义](https://www.cnblogs.com/tiancai/p/9072813.html)

红结点链接一个黑结点，就是`2-3树`中的3-结点。





## 实现

### 左旋、右旋

围绕某个节点的左旋、右旋



<img src="img/红黑树/0e37e597737012593a93105ebbf4591e.jpg" alt="img" style="zoom:50%;" />



实现部分挺复杂的，可以结合`TreeMap`的源码进行理解：

* [TreeMap红黑树源码详解](https://blog.csdn.net/abcdef314159/article/details/77193888)





网上都说看算法4，里面讲的根据`2-3树`来的，好理解些。。